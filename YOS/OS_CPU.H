/*********************************************************************************************************
**				                              HGOS(YOS)
**
**                                  (c) Copyright 2012-2015, Yang Wensen
**                                           All Rights Reserved
**
**                                                  V1.04
*********************************************************************************************************/
/*********************************************************************************************************
版本：YOS For STM8   Version:2015-04-21A  13:44
1.OS_CPU_A.s和OS_CPU_C.c中把OSEnterSum中堆栈结构中去掉
2.CPU频率和滴答定时器的初始化和中断函数移到应用程序中
3.OS_CPU_C.c去掉包含common_zpyws.h方便生成库文件
*********************************************************************************************************/
#ifndef OS_CPU_H
#define OS_CPU_H
/*********************************************************************************************************
********************************************************************************************************/
//******基本数据类型定义************************************************************************************************************************
#define OS_PORT_VERSION         "2015-06-12A"
//******************************************************************************************************************************
#include "YOS_TypeDefs.h"
#include "OS_DEFS.H"
//******************************************************************************************************************************
typedef uint8				OS_CPU_t;//CPU字长是32位
typedef OS_CPU_t			OS_STK_t;//堆栈宽度是32位
typedef uint16				OS_TICK_t;
typedef uint8               OS_SEM_CNT_t;//信号量计数器的宽度
typedef uint8               OS_Q_SIZE_t;//消息队列消息数量的宽度
typedef uint8				OS_RING8_SIZE_t;//环形缓冲消息数量的宽度
//******************************************************************************************************************************
//通常不需要修改的部分
typedef uint32              OS_MEM_BLKS_t;//内存块数的宽度
typedef uint32              OS_MEM_BLK_SIZE_t;//内存一个块大小的宽度
typedef uint16              OS_STK_SIZE_t;//堆栈长度(堆栈空间)的宽度
//******************************************************************************************************************************
#define OS_ENTER_CRITICAL()      do{cpusr = SAVE_CPU_SR();}while(0)
#define OS_EXIT_CRITICAL()       do{RESTORE_CPU_SR(cpusr);}while(0)
/*********************************************************************************************************
  Other definitions  其他定义
*********************************************************************************************************/
#define  OS_STK_GROWTH           1//向下增长型堆栈
//***************************************************************************************************************************************
//来自OS_CPU_A.H
extern OS_CPU_t SAVE_CPU_SR(void);
extern void RESTORE_CPU_SR(OS_CPU_t cpusr);
/*********************************************************************************************************
**                            End Of File
********************************************************************************************************/
#endif
